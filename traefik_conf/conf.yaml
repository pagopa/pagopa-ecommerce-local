http:
  routers:
    notifications-router:
      service: "pagopa-notifications-service"
      rule: "PathPrefix(`/notifications-service`)"
      middlewares:
        - notifications-headers
        - notifications-prefix

    nodo-mock-router:
      service: "nodo-mock"
      rule: "PathPrefix(`/nodo`) || PathPrefix(`/webservices`)"
      middlewares:
        - nodo-prefix

    payment-methods-router:
      service: "pagopa-ecommerce-payment-methods-service"
      rule: "PathPrefix(`/payment-methods-service`)"
      middlewares:
        - payment-methods-headers
        - payment-methods-prefix

    transactions-router:
      service: "pagopa-ecommerce-transactions-service"
      rule: "PathPrefix(`/transactions-service`)"
      middlewares:
        - transactions-prefix

  middlewares:

    notifications-headers:
      headers:
        customRequestHeaders:
          X-Client-ID: "CLIENT_ECOMMERCE"
    notifications-prefix:
      stripPrefix:
        prefixes:
          - "/notifications-service"

    nodo-prefix:
      stripPrefix:
        prefixes:
          - "/nodo"
    
    payment-methods-prefix:
      stripPrefix:
        prefixes:
          - "/payment-methods-service"
    payment-methods-headers:
      headers:
        customRequestHeaders:
          X-Client-ID: "CHECKOUT"

    transactions-prefix:
      stripPrefix:
        prefixes:
          - "/transactions-service"


  services:
    pagopa-notifications-service:
      loadBalancer:
        servers:
          - url: "http://pagopa-notifications-service:3000"

    nodo-mock:
      loadBalancer:
        servers:
          - url: "http://pagopa-node-mock:3002"

    pagopa-ecommerce-payment-methods-service:
          loadBalancer:
            servers:
              - url: "http://pagopa-ecommerce-payment-methods-service:8080"              - url: "http://pagopa-ecommerce-payment-methods-service:8080"

    pagopa-ecommerce-transactions-service:
      loadBalancer:
        servers:
          - url: "http://pagopa-ecommerce-transactions-service:8080"
